# P1439

## 题目描述

给出 $1,2,\ldots,n$ 的两个排列 $P_1$ 和 $P_2$ ，求它们的最长公共子序列。

## 输入格式

第一行是一个数 *$n$*。

接下来两行，每行为 *$n$* 个数，为自然数 $1,2,\ldots,n$ 的一个排列。

## 输出格式

一个数，即最长公共子序列的长度。

## 数据范围

$\large n\leq 10^5$

## 分析：

~~我太菜了，这么简单的变换都想不出来，又看了题解。~~

朴素算法：对于每个位置暴力向后匹配。

首先，一眼瞄出来朴素算法时间 $\Omicron(n^2)$ 死了，我们需要优化。

然后注意，给定的是 $1,2,\ldots,n$ 的两个排列 $P_1$ 和 $P_2$ 。

也就是说每一个 $P_1$ 中的数字在 $P_2$ 中有对应，我们将设定映射关系 $f(x) = id(P_2(x))$。

然后将 $P_1$ 通过这个映射转换一下变为记录 $P_2$ 中与 $P_1$ 该位数字相同的数的位置，求一下 $\Large LIS$。

易有 $LIS$ 的长度即为所求。

而 $LIS$ 通过优化可以达到 $\Omicron(n\log n)$ 。

该题可过。 